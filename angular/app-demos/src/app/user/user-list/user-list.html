<!-- <pre> {{ members | json }}</pre> -->
<h2>Alta</h2>

<div *ngIf="newMember">
  <form #addForm="ngForm">
    <div>
      <label>ID</label>
      <input
        name="id"
        type="text"
        [(ngModel)]="newMember.id"
        required
        #id="ngModel"
      />
      <div *ngIf="id.invalid && id.touched">El id es requerido</div>
    </div>
    <div>
      <label>Name</label>
      <input
        name="name"
        type="text"
        [(ngModel)]="newMember.login"
        minlength="6"
        #name="ngModel"
        required
      />
      <div *ngIf="name.invalid && name.touched">
        <div *ngIf="name.errors!['required']">El name es requerido</div>
        <div *ngIf="name.errors!['minlength']">
          El name debe tener 6 carácteres
        </div>
      </div>
    </div>
    <div>
      <label>Avatar</label>
      <input
        name="avatar"
        type="file"
        accept="image/*"
        (change)="handleFileInput($event)"
      />
      <div><img [src]="newMember.avatar_url" width="50" /></div>
    </div>
    <button [disabled]="addForm.invalid" (click)="add()">Añadir</button>
  </form>
</div>

<h2>Listado</h2>

<div>
  <label>Buscar por nombre</label>
  <input type="text" #search (keyup)="(0)" />
</div>

<table>
  <thead>
    <tr>
      <th appHighlight color="pink">Avatar</th>
      <th>Id</th>
      <th>Name</th>
    </tr>
  </thead>
  <tbody>
    <tr
      *ngFor="let member of members | searchByLogin : search.value"
      (click)="select(member)"
    >
      <td>
        <img [src]="member.avatar_url" />
      </td>
      <td>
        <span>{{ member.id }}</span>
      </td>
      <td>
        <span>{{ member.login }}</span>
      </td>
    </tr>
  </tbody>
</table>

<app-user-edit [member]="selectedMember" (saveEvent)="save($event)" />
